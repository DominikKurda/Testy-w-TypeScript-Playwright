import { test, expect } from '@playwright/test';

test('Open Tab: przełączenie na nową kartę i asercje', async ({ page, context }) => {
    await page.goto('https://rahulshettyacademy.com/AutomationPractice/');

    const [newPage] = await Promise.all([
        context.waitForEvent('page'),
        page.locator('#opentab').click(),
    ]);

    await newPage.waitForLoadState('domcontentloaded');

  
    await expect(newPage).toHaveURL('https://www.qaclickacademy.com/');

    
    await expect(newPage).toHaveTitle(/QA Click Academy|QAClick Academy|Rahul Shetty/i);

    
    await expect(newPage.locator('body')).toBeVisible();

    await newPage.close();

    await expect(page).toHaveURL(/AutomationPractice/);
});
